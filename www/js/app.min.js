angular.module("Feiyi",["ngRoute","LocalStorageModule","flow"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,t,r,n,o){angular.forEach(o.interceptor,function(t){var r=t.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});r+="Controller",e.when("/"+t,{templateUrl:"templates/"+t+".html",reloadOnSearch:!1,controller:r,resolve:{user:["$q","$location","localStorageService",function(e,r,n){var o=["account"],a=e.defer();return o.includes(t)&&!n.get("token")?(a.reject(),r.path("/signin").replace(),void 0):(a.resolve(),a.promise)}]}})}),e.otherwise("/index"),t.defaults.useXDomain=!0,t.defaults.withCredentials=!0,delete t.defaults.headers.common["X-Requested-With"],n.setStorageCookie(.02),t.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Feiyi").factory("weixinServices",["$http","$route","$timeout","$rootScope","$location","toastServices","$q","$window","localStorageService","config",function(e,t,r,n,o,a,i,c,s,u){function l(e,t,r,n){wx.onMenuShareTimeline({title:e||p.share.title,link:t||p.share.link,imgUrl:r||p.share.thumbnail,trigger:function(){},success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e||p.share.title,desc:n||p.share.desc,link:t||p.share.link,imgUrl:r||p.share.thumbnail,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e||p.share.title,desc:n||p.share.desc,link:t||p.share.link,imgUrl:r||p.share.thumbnail,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:e||p.share.title,desc:n||p.share.desc,link:t||p.share.link,imgUrl:r||p.share.thumbnail,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:e||p.share.title,desc:n||p.share.desc,link:t||p.share.link,imgUrl:r||p.share.thumbnail,success:function(){},cancel:function(){}})}var d=c.navigator.userAgent.toLowerCase();n.wx_browser=-1!=d.indexOf("micromessenger")?!0:!1;var p={base_url:"https://open.weixin.qq.com/connect/oauth2/authorize",access_token_url:"https://api.weixin.qq.com/sns/oauth2/access_token",userinfo_url:"https://api.weixin.qq.com/sns/userinfo",appid:"wxfc4845662ab85927",secret:"1428c0468f80f233c7f17d887582f2f6",redirect_uri:"http://www.uelives.com/oauth",payment_redirect_uri:"http://www.uelives.com/app/WeixinCommon/weixinPay",response_type:"code",scope:"snsapi_userinfo",state:"weixin",wechat_redirect:"#wechat_redirect",share:{}};return{config:function(){return this.query_signature({current_url:o.absUrl().split("#")[0]}).then(function(e){e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS&&wx.config({debug:!1,appId:p.appid,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","chooseWXPay"]})})},query_signature:function(t){return e({url:u.url+"/app/WeixinCommon/getSignature",method:"GET",params:angular.extend({},u.common_params,t)}).then(function(e){return e.data})},query_payment_signature:function(t){return e({url:u.url+"/app/OrdersManage/comfiyPay",method:"GET",params:angular.extend({},u.common_params,t)}).then(function(e){return e.data})},initWeixinShareEvent:function(e,t,r,n){l(e,t,r,n)},queryAuthorizationCode:function(){var e=p.base_url+"?appid="+p.appid+"&redirect_uri="+encodeURIComponent(p.redirect_uri)+"&response_type="+p.response_type+"&scope="+p.scope+"&state="+p.state+p.wechat_redirect;c.location.href=e},queryAuthorizationCodeSilently:function(e){e=angular.extend({},e);var t=p.base_url+"?appid="+p.appid+"&redirect_uri="+encodeURIComponent(e.redirect_uri)+"&response_type="+p.response_type+"&scope="+p.scope+"&state="+JSON.stringify(e)+p.wechat_redirect;c.location.href=t},prepare_pay:function(e){e=angular.extend({},e,{redirect_uri:p.payment_redirect_uri}),this.queryAuthorizationCodeSilently(e)},pay:function(e){a.show(),wx.chooseWXPay({timestamp:e.timestamp,nonceStr:e.nonceStr,"package":e.package_web,signType:e.signType,paySign:e.paySign,success:function(){a.hide(),r(function(){c.location.href=o.protocol()+"://"+o.host()+":"+o.port()+"/mobile/#/order_management_user"},1e3)},cancel:function(){a.hide(),r(function(){n.back()},1e3)},fail:function(){a.hide(),r(function(){n.back()},1e3)}})}}}]),angular.module("Feiyi").factory("utilServices",["$q",function(e){var t=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return new Blob([n],{type:r})},r=function(r){var n=e.defer(),o=document.createElement("img");try{var a=new FileReader;a.onload=function(e){o.src=e.target.result;var r=document.createElement("canvas"),a=r.getContext("2d");a.drawImage(o,0,0);var i=500,c=500,s=o.width,u=o.height;s>u?s>i&&(u*=i/s,s=i):u>c&&(s*=c/u,u=c),r.width=s,r.height=u;var a=r.getContext("2d");a.drawImage(o,0,0,s,u);var l=r.toDataURL("image/jpeg"),d=t(l);n.resolve(d)},a.readAsDataURL(r)}catch(i){n.resolve(i)}return n.promise};return{resizeFile:r}}]),angular.module("Feiyi").factory("userServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,t,r,n,o){return{rsa_key:r._get(angular.extend({},o.common_params,{url:"key/private_key.pem"})),signin:r._get(angular.extend({},o.common_params,{url:o.url+"api_url"})),signup:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/RegistTelOne",token:n.get("token")})),update_telephone:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/updateTelephone",token:n.get("token")})),forget:r._get(angular.extend({},o.common_params,{url:o.url+"api_url"})),reset:r._get(angular.extend({},o.common_params,{url:o.url+"api_url"})),get_smscode:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/GetCode",token:n.get("token")})),query_basicinfo:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/userInfo",token:n.get("token")})),update_avatar:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/updateBgImg",token:n.get("token")})),update_userinfo:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/updateUserInfo",token:n.get("token")})),realname_authen:r._get(angular.extend({},o.common_params,{url:o.url+"api_url",token:n.get("token")})),phone_authen:r._get(angular.extend({},o.common_params,{url:o.url+"api_url",token:n.get("token")})),like:r._get(angular.extend({},o.common_params,{url:o.url+"api_url",token:n.get("token")})),unlike:r._get(angular.extend({},o.common_params,{url:o.url+"api_url",token:n.get("token")})),query_messages:r._get(angular.extend({},o.common_params,{url:o.url+"api_url",token:n.get("token")})),query_message_by_id:r._get(angular.extend({},o.common_params,{url:o.url+"api_url",token:n.get("token")})),query_city:r._get(angular.extend({},o.common_params,{url:"city/city_with_index.json",token:n.get("token")})),query_inter_city:r._get(angular.extend({},o.common_params,{url:"city/inter_city_with_index.json",token:n.get("token")})),query_language:r._get(angular.extend({},o.common_params,{url:"city/language.json",token:n.get("token")})),query_country_code:r._get(angular.extend({},o.common_params,{url:"city/country_code.json",token:n.get("token")})),query_industries:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/translateFieldList",token:n.get("token")})),create_edu_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserEduExps/addUserEduExps",token:n.get("token")})),query_edu_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserEduExps/userEduExperienceInfo",token:n.get("token")})),update_edu_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserEduExps/editUserEduExps",token:n.get("token")})),remove_edu_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserEduExps/deleteUserEduExps",token:n.get("token")})),create_work_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserWorkExps/addUserWorkExps",token:n.get("token")})),query_work_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserWorkExps/userUserWorkExpInfo",token:n.get("token")})),update_work_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserWorkExps/editUserWorkExps",token:n.get("token")})),remove_work_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserWorkExps/deleteUserWorkExps",token:n.get("token")})),create_cert_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserIdentitys/addUserIdentity",token:n.get("token")})),query_cert_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserIdentitys/userIdentityInfo",token:n.get("token")})),update_cert_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserIdentitys/editUserIdentity",token:n.get("token")})),remove_cert_experience:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserIdentitys/deleteUserIdentity",token:n.get("token")})),query_scenes:r._get(angular.extend({},o.common_params,{url:o.url+"/app/Home/translateSceneList",token:n.get("token")})),query_schedule:r._get(angular.extend({},o.common_params,{url:o.url+"/app/ScheduleManage/scheduleList",token:n.get("token")})),mark_schedule:r._post(angular.extend({},o.common_params,{url:o.url+"/app/ScheduleManage/setTranslateTime",token:n.get("token")})),booking:r._get(angular.extend({},o.common_params,{url:o.url+"/app/OrdersManage/makeOrder",token:n.get("token")})),preview:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/doneAndLook",token:n.get("token")})),query_qualified_translator:r._get(angular.extend({},o.common_params,{url:o.url+"/app/Home/fullCompletelyUserList",token:n.get("token")})),query_unqualified_translator:r._get(angular.extend({},o.common_params,{url:o.url+"/app/Home/maybeUserList",token:n.get("token")})),query_comments:r._get(angular.extend({},o.common_params,{url:o.url+"/app/Comments/myCommentList",token:n.get("token")})),comment:r._get(angular.extend({},o.common_params,{url:o.url+"/app/Comments/comment",token:n.get("token")})),query_comment_by_order:r._get(angular.extend({},o.common_params,{url:o.url+"/app/OrdersManage/commentDetail",token:n.get("token")})),online_booking:r._get(angular.extend({},o.common_params,{url:o.url+"/app/OrdersManage/submitOrder"})),query_orders:r._get(angular.extend({},o.common_params,{url:o.url+"/app/OrdersManage/myOrderList",token:n.get("token")})),query_order:r._get(angular.extend({},o.common_params,{url:o.url+"/app/OrdersManage/orderDetail",token:n.get("token")})),mark:r._get(angular.extend({},o.common_params,{url:o.url+"/app/OrdersManage/setOrderType",token:n.get("token")})),query_price:r._get(angular.extend({},o.common_params,{url:o.url+"/app/UserCenter/averagePay",token:n.get("token")}))}}]),angular.module("Feiyi").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,t,r,n,o){return{request:function(e){return e},requestError:function(){},response:function(n){var a=t.defer();return n.config.url.indexOf(".html")>0?n:n.data.code==o.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),r.remove("token"),r.remove("user_id"),e.path("/interpreter_settled").replace(),a.promise):n},responseError:function(e){var r=t.defer();return n.requestError(e.data,e.status,e.headers,e.config),r.promise}}}]),angular.module("Feiyi").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()},start:function(){NProgress.start()},done:function(){NProgress.done()}}}),angular.module("Feiyi").factory("feiyiServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,t,r,n,o){return{query_information_by_type:r._get(angular.extend({},o.common_params,{url:o.url+"/app/NewsManage/newsList"})),query_information_by_id:r._get(angular.extend({},o.common_params,{url:o.url+"/app/NewsManage/newsDetail"}))}}]),angular.module("Feiyi").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,t,r){return{show:function(t){e.error_msg=t,$(".error-msg").show()},hide:function(){e.error_msg="",$(".error-msg").hide()},autoHide:function(r){e.error_msg=r,$(".error-msg").show(),t(function(){e.error_msg="",$(".error-msg").hide()},3e3)},requestError:function(n,o,a,i){switch(r.hide(),o){case 0:this.autoHide("连接超时");break;case 404:this.autoHide("加载出错，请稍后再试"),t(function(){e.back()},2e3);break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(o),console.log(n),console.log(a),console.log(i),console.log("onRequestError end")}}}]),angular.module("Feiyi").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i){var c=function(){},s=function(e,t,r){o.hide(),n.hide(),l(e,t,r)},u=function(){},l=function(){};return{init:function(){e.$on("$routeChangeStart",c),e.$on("$routeChangeSuccess",s),e.$on("$routeChangeError",u),e.go=function(e){r.path(e)},e.back=function(){t.history.back()},"8000"==r.port()&&a.set("token","oeZT9s0s0P1-s5Ns7nQOxfUldSk3"),e.staticImageUrl=i.imageUrl}}}]),angular.module("Feiyi").factory("apiServices",["$http","localStorageService",function(e,t){return{_get:function(r){return function(n){return void 0!==r.token&&(r.token=t.get("token")),e({url:r.url,method:"GET",params:angular.extend({},r,n)}).then(function(e){return e.data})}},_post:function(r){return function(n){return void 0!==r.token&&(r.token=t.get("token")),e({url:r.url,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")},data:angular.extend({},r,n)}).then(function(e){return e.data})}}}}]),angular.module("Feiyi").directive("uploader",["$timeout","localStorageService","toastServices","errorServices","config",function(e,t,r,n,o){return{restrict:"E",template:function(e,t){var r="",n=t.rate;return r="<imageview center-only data-rate='"+n+"' src='src'></imageview>"},controller:["$scope","$element","$attrs",function(e,n,a){var i,c;e.$on("flow::filesSubmitted",function(e,n){n.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return c=e,e});var a=Math.floor(1e6*Math.random())+c;i=(new Date).getTime()+a,n.opts.target=o.url+"/app/UserCenter/updatePic",n.opts.testChunks=!1,n.opts.fileParameterName="image_01",n.opts.query={invoke:"h5",token:t.get("token"),filename:i},r.show(),n.upload()}),e.$on("flow::fileAdded",function(){}),e.src="../images/default.png",a.default&&(e.src=a.default),a.$observe("src",function(t){t&&(e.src=o.imageUrl+t)}),e.$on("flow::fileSuccess",function(){e.src=o.imageUrl+i,r.hide()})}],link:function(){}}}]),angular.module("Feiyi").directive("showOnLoaded",function(){return{link:function(e,t){$(t).css({visibility:"hidden"}),t.bind("load",function(){console.log("loaded");var r=parseFloat(e.$eval($(t).parent().attr("data-rate")));if(!r)return console.log("unexpect rate"),void 0;var n=$(t).width()/$(t).height();r>n?$(t).css({height:"100%",width:"auto"}):$(t).css({height:"auto",width:"100%"}),$(t).parent().css({background:"none"}),$(t).css({visibility:"visible"})})}}}),angular.module("Feiyi").directive("pagetitle",["$document",function(e){return{restrict:"E",scope:{title:"="},link:function(t){e[0].title=t.title;var r=$("body"),n=$('<iframe src="/favicon.ico" style="display:none"></iframe>');n.on("load",function(){setTimeout(function(){n.off("load").remove()},0)}).appendTo(r)}}}]),angular.module("Feiyi").directive("onRepeatDone",function(){return{restrict:"A",link:function(e,t){e.$last&&e.$emit("onRepeatDone",t)}}}),angular.module("Feiyi").directive("onload",function(){return{restrict:"A",link:function(e,t){$(t).css({opacity:0}),$(t).bind("load",function(){$(t).css({opacity:1})})}}}),angular.module("Feiyi").directive("mobilepicker",["$timeout",function(e){return{restrict:"E",scope:{options:"="},template:"<input type='text' name='picker' placeholder='{{options.placeholder}}' class='full-width' readonly ng-model='options.value'>",link:function(t,r){var n={beginyear:1950,endyear:(new Date).getFullYear(),days:["周日","周一","周二","周三","周四","周五","周六"],curdate:!1,theme:"date",event:"click",today:!1,callBack:function(e){var r="";for(key in e)e[key]&&(r+=e[key]+"-");r=r.substring(0,r.length-1),t.options.value=r}};e(function(){$(r).find("input").datePicker(angular.extend({},n,t.options))},0)}}}]),angular.module("Feiyi").directive("imageview",["$timeout",function(e){return{restrict:"E",scope:{src:"=",err:"=?"},controller:["$scope","$element","$attrs",function(t,r,n){function o(e){$(e.target).css({width:"auto",height:"auto"});var r=$(e.target),n=r.width(),o=r.height(),a=parseFloat(n)/parseFloat(o);a<t.rate?(n=t.width,o=t.width/a,r.css({display:"inline-block",height:o,width:n,"margin-top":-(o-t.height)/2})):(o=t.height,n=o*a,r.css({display:"inline-block",height:o,width:n,"margin-left":-(n-t.width)/2})),r.parent().css({background:"none"}),r.css({visibility:"visible"})}function a(e){var r=$(e.target),n=r.width(),o=r.height(),a=parseFloat(n)/parseFloat(o);a<t.rate?r.css({display:"inline-block",height:"100%",width:"auto"}):r.css({display:"inline-block",height:"auto",width:"100%"}),r.parent().css({background:"none"}),r.css({visibility:"visible"})}return t.bg_image=t.err||"../images/default.png",t.rate=parseFloat(t.$eval(n.rate)),console.log(t.rate),t.width=r.parent().width()||$(window).width(),t.height=t.width/t.rate,t.rate?(this.show_center_on_loaded=function(t){o(t),e(function(){o(t)},100)},this.show_on_loaded=function(t){a(t),e(function(){a(t)},100)},void 0):(console.log("unexpect rate"),void 0)}],template:function(e){var t="<img ng-src='{{src}}' show-center-on-loaded err-src='{{bg_image}}'>";return void 0==$(e).attr("center-only")&&(t="<img ng-src='{{src}}' show-on-loaded err-src='{{bg_image}}'>"),t},link:function(e,t){var r={display:"block",width:e.width,overflow:"hidden","text-align":"center","background-image":"url("+e.bg_image+")","background-position":"center center","background-repeat":"no-repeat",height:e.height,overflow:"hidden"};$(t).css(r)}}}]).directive("showOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,r,n){t.bind("load",n.show_on_loaded)}}}).directive("showCenterOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,r,n){t.bind("load",n.show_center_on_loaded)}}}),angular.module("Feiyi").directive("dribehanceHeader",function(){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"=",backAction:"="},link:function(){}}}),angular.module("Feiyi").directive("dribehanceFooter",function(){return{restrict:"E",templateUrl:"templates/footer.html",scope:{active:"="},link:function(){}}}),angular.module("Feiyi").directive("errSrc",function(){return{restrict:"A",link:function(e,t,r){$(t).bind("error",function(){$(t).attr("src",r.errSrc)})}}}),angular.module("Feiyi").directive("countdown",["$interval",function(e){return{restrict:"E",scope:{countdown:"=",disabled:"=countdownDisabled"},link:function(t,r){function n(){var r=t.countdown.message,n=parseFloat(t.countdown.count)?parseFloat(t.countdown.count):60;o=!0,t.$apply(function(){t.countdown.message=n--,t.countdown.message=n+"s重新获取",t.countdown.mode="disabled",t.countdown.reset=!1,t.countdown.callback()});var a=e(function(){t.countdown.message=n--,t.countdown.message=n+"s重新获取",(0>n||t.countdown.reset)&&(e.cancel(a),t.countdown.message=r,o=!1)},1e3)}var o=!1;$(r).bind("click",function(){t.disabled||o||n()})}}}]),angular.module("Feiyi").directive("confirm",function(){return{restrict:"E",scope:{confirm:"="},templateUrl:"templates/confirm.html",link:function(e,t){e.confirm=angular.extend({},{title:"Tips",content:"Are You Sure?",content_type:"content",open:function(){$(t).show()},cancel:function(){$(t).hide(),"function"==typeof e.confirm.cancle_callback&&e.confirm.cancle_callback()},ok:function(){$(t).hide(),"function"==typeof e.confirm.ok_callback&&(e.confirm.ok_callback(),e.confirm.content_type="content")}},e.confirm)}}}),angular.module("Feiyi").directive("banner",function(){return{restrict:"E",transclude:!0,template:"<div class='carousel-holder owl-carousel theme' ng-transclude></div>",link:function(e,t){var r={autoplay:!0,items:1};r=angular.extend({},r,e.$eval($(t).attr("data-options")));var n=parseFloat(e.$eval($(t).attr("data-rate"))),o={display:"block",width:$(t).parent().width()||$(window).width(),height:($(t).parent().width()||$(window).width())/n};$(t).css(o),e.$on("onRepeatDone",function(){$(t).find(".carousel-holder").owlCarousel(r)})}}}),angular.module("Feiyi").controller("weixinController",["$scope","$rootScope","$location","$timeout","weixinServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c,s){t.wx_browser&&o.config().then(function(){i.show(),o.query_payment_signature({orders_id:c.get("orders_id"),code:c.get("code")}).then(function(e){i.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?o.pay(e):t.back()})})}]),angular.module("Feiyi").controller("signinController",["$scope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c){e.input={},e.countdown={message:"获取验证码"},e.countdown.callback=function(){a.show(),n.get_smscode({telephone:e.input.telephone,country_code:e.input.country_code.code}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?o.autoHide(t.message):(e.countdown.reset=!0,o.autoHide(t.message))})},e.ajaxForm=function(){return e.agree?(a.show(),n.signup({country_code:e.input.country_code.code,telephone:e.input.telephone,tel_code:e.input.code,weChat:e.input.wechat}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?(o.autoHide(e.message),i.set("token",e.token),t(function(){r.path("information").replace()},2e3)):o.autoHide(e.message)}),void 0):(o.autoHide("请阅读并同意《译员协议》"),void 0)},e.input.country_code={name:"中国",code:"+86"},e.agree=!1,e.is_agree=function(){e.agree=!e.agree},e.cache_and_go=function(t,n){i.set("cache",e.input),r.path(t).search("cache_key",n)};var s=i.get("cache");s&&(e.input=angular.extend({},e.input,s));var u=i.get("server");e.input.wechat=u&&u.wechat||""}]),angular.module("Feiyi").controller("paymentController",["$scope","$rootScope","$timeout","$routeParams","userServices","weixinServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c,s){return n.order_id?(e.order_id=n.order_id,e.payment=s.get("payment"),e.weixinpay=function(){return parseFloat(e.payment.money)>2999.99?(i.autoHide("支付金额大于3000，请使用银联支付"),void 0):3==n.status?(a.queryAuthorizationCodeSilently({orders_id:e.order_id,redirect_uri:"http://www.uelives.com/app/MenuController/getWeixinOauth"}),void 0):(a.prepare_pay({id:e.order_id}),void 0)},e.yinlianpay=function(){angular.element("#yinlianForm").submit()},void 0):(t.back(),void 0)}]),angular.module("Feiyi").controller("ordersController",["$scope","$routeParams","$route","$timeout","$filter","userServices","errorServices","toastServices","localStorageService","config",function(e){e.tab_item="unpaid",e.active_tab=function(t){e.tab_item=t}}]),angular.module("Feiyi").controller("orderController",["$scope","$routeParams","$filter","userServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c){a.show(),n.query_order({orders_id:t.id}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.order=t.Result.Orders,e.order.schedule_from=e.format_time(e.order.order_time.split("#")[0],"MM-dd"),e.order.schedule_to=e.format_time(e.order.order_time.split("#")[e.order.order_time.split("#").length-1],"MM-dd")):o.autoHide(t.message)}),e.format_time=function(e){return e?e.split("-").join("."):void 0},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.parse_time=function(t){return t.split("#").map(function(t){return e.format_time(t,"yyyy.MM.dd")}).join("-")}}]),angular.module("Feiyi").controller("informationDetailController",["$scope","$sce","$routeParams","feiyiServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c){a.show(),n.query_information_by_id({news_id:r.id}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.info=t.Result.NewsDetailResponse:o.autoHide(t.message)}),e.parse_html=function(e){return t.trustAsHtml(e)}}]),angular.module("Feiyi").controller("informationController",["$scope","$location","feiyiServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i){e.tab_item="1",e.active_tab=function(t){e.tab_item!=t&&(e.tab_item=t,e.page={pn:1,page_size:1,message:"点击加载更多",type:t},e.no_more=!1,e.loadMore(!0))},e.go=function(e){t.path("information_detail").search("id",e)},e.information=[],e.page={pn:1,page_size:1,message:"点击加载更多",type:1},e.loadMore=function(t){e.no_more||(o.show(),e.page.message="正在加载...",r.query_information_by_type(e.page).then(function(r){o.hide(),e.page.message="点击加载更多",r.code==i.request.SUCCESS&&r.status==i.response.SUCCESS?(t&&(e.information=[]),e.information=e.information.concat(r.Result.NewsList.list),e.no_more=e.information.length==r.Result.NewsList.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(!1)}]),angular.module("Feiyi").controller("indexController",["$scope","$filter","$location","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c,s){e.input={},e.input.city="深圳",e.input.language={from:"中文",to:""},e.input.scenes="",e.input.industry="",e.input.sex="不限",e.select_gender=function(t){e.input.sex=t},e.format_time=function(e,r){return t("date")(e,r)},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.cache_and_go=function(t,n){c.set("cache",e.input),r.path(t).search("cache_key",n)};var u=new Date,l=new Date;u.setDate(u.getDate()+1),l.setDate(l.getDate()+2),e.input.choice_time=[e.format_time(u,"yyyy-MM-dd"),e.format_time(l,"yyyy-MM-dd")];var d=c.get("cache");d&&(e.input=angular.extend({},e.input,d)),e.input.choice_time&&(e.input.schedule_from=e.format_time(e.input.choice_time[0],"MM-dd")),e.input.choice_time&&(e.input.schedule_to=e.format_time(e.input.choice_time[e.input.choice_time.length-1],"MM-dd")),e.input.choice_time&&(e.input.schedule_total=e.input.choice_time.length),e.ajaxForm=function(){c.set("cache",e.input),i.show(),o.booking({city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex}).then(function(e){i.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS&&"1"==e.have_translate_user?r.path("interpreter_list").search("order_id",e.orders_id):r.path("self_booking").search("order_id",e.orders_id)})}}]),angular.module("Feiyi").controller("donateController",["$scope","$rootScope","$timeout","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c,s){e.input={},e.ajaxForm=function(){i.show(),o.comment({orders_id:n.order_id,comment_star:e.input.star,note:e.input.note,service:e.input.service,profession:e.input.profession,tongue:e.input.tongue}).then(function(e){i.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?(a.autoHide(e.message),r(function(){t.back()},2e3)):a.autoHide(e.message)})}}]),angular.module("Feiyi").controller("doctorsController",["$scope","$filter","$location","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e){e.doctor={}}]),angular.module("Feiyi").controller("doctorController",["$scope","$routeParams","$filter","$location","$rootScope","weixinServices","userServices","errorServices","toastServices","localStorageService","config",function(e){e.tab_item="doctor_info",e.active_tab=function(t){e.tab_item=t}}]),angular.module("Feiyi").controller("commentsController",["$scope","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i){o.show(),r.query_comment_by_order({orders_id:t.id}).then(function(t){o.hide(),t.code==i.request.SUCCESS&&t.status==i.response.SUCCESS?e.comment=t.Result.Comment:n.autoHide(t.message)})}]),angular.module("Feiyi").controller("commentController",["$scope","$rootScope","$timeout","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,r,n,o,a,i,c,s){e.input={},e.ajaxForm=function(){i.show(),o.comment({orders_id:n.order_id,comment_star:e.input.star,note:e.input.note,service:e.input.service,profession:e.input.profession,tongue:e.input.tongue}).then(function(e){i.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?(a.autoHide(e.message),r(function(){t.back()},2e3)):a.autoHide(e.message)})}}]),angular.module("Feiyi").constant("config",{url:"http://120.76.55.55",imageUrl:"http://120.76.55.55/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5",app_sign:"123456"},interceptor:["index","comment","comments","doctor","doctors","donate","orders","order","information","information_detail","payment","signin"]});
//# sourceMappingURL=app.min.js.map
